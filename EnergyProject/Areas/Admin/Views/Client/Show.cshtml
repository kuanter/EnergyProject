@using System.Linq
@model IEnumerable<EnergyProject.Models.User>
@{
    ViewData["Title"] = "AdminUsers";
}
<link rel="stylesheet" href="~/css/admin-users.css" />

<section class="page">
    <div class="toolbar">
        <h1 class="h1">Users</h1>

        <div class="search">
            <form method="get" asp-area="Admin" asp-controller="Client" asp-action="Show">
                <input name="q"
                       placeholder="Search by name, email or phone"
                       value="@Context.Request.Query["q"]" />
                <button class="btn" type="submit">Search</button>
            </form>
        </div>
    </div>

    <table class="table">
        <tbody>
            @if (!Model.Any())
            {
                <tr>
                    <td colspan="6">No users found.</td>
                </tr>
            }
            else
            {
                @foreach (var user in Model)
                {
                    <tr>
                        <td>@user.Id</td>
                        <td>@user.FullName</td>
                        <td><span class="chip chip-dark">@user.Email</span></td>
                        <td><span class="chip chip-dark">@user.Phone</span></td>
                        <td>@user.Role</td>
                        <td>
                            <form asp-area="Admin"
                                  asp-controller="Client"
                                  asp-action="Show"
                                  method="post"
                                  onsubmit="return confirm('Delete this user?');">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="id" value="@user.Id" />
                                <button type="submit" class="btn">Delete</button>
                            </form>
                        </td>
                    </tr>
                }
            }
        </tbody>

    </table>
</section>